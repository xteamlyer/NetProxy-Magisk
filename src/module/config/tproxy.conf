# TProxy 透明代理配置文件
# 此文件由 tproxy.sh 脚本加载

# ===================== 代理核心配置 =====================
# 代理进程运行用户和组
CORE_USER_GROUP="root:net_admin"
# 代理流量标记
ROUTING_MARK=""
# 强制标记绕过 (0: 禁用, 1: 启用)
FORCE_MARK_BYPASS=0
# 透明代理监听端口
PROXY_TCP_PORT="12345"
PROXY_UDP_PORT="12345"

# 代理模式: 0=自动检测, 1=强制TPROXY, 2=强制REDIRECT
PROXY_MODE=0

# 性能模式 (0: 禁用, 1: 启用, 优化 TPROXY 规则)
PERFORMANCE_MODE=0

# ===================== DNS 配置 =====================
# DNS 劫持方式 (0: 禁用, 1: tproxy, 2: redirect)
DNS_HIJACK_ENABLE=1
# DNS 监听端口
DNS_PORT="1053"

# ===================== 网络接口定义 =====================
# 移动数据接口
MOBILE_INTERFACE="rmnet_data+"
# WiFi 接口
WIFI_INTERFACE="wlan0"
# 热点接口
HOTSPOT_INTERFACE="wlan2"
# USB 共享接口
USB_INTERFACE="rndis+"
# 其他需要代理的接口 (空格分隔)
OTHER_PROXY_INTERFACES=""
# 其他需要绕过的接口 (空格分隔)
OTHER_BYPASS_INTERFACES=""

# ===================== 代理开关 =====================
PROXY_MOBILE=1
PROXY_WIFI=1
PROXY_HOTSPOT=0
PROXY_USB=0
PROXY_TCP=1
PROXY_UDP=1
PROXY_IPV6=0

# ===================== IP 列表配置 =====================
# 本地保留地址和私有地址绕过列表
# 注意：100.0.0.0/8 包含了运营商级 NAT (100.64.0.0/10)
# 注意：中国三大运营商的 IPv6 常见前缀已默认绕过： 2409:8000::/20 2408:8000::/20 240e::/18
BYPASS_IPv4_LIST="0.0.0.0/8 10.0.0.0/8 100.0.0.0/8 127.0.0.0/8 169.254.0.0/16 172.16.0.0/12 192.0.0.0/24 192.0.2.0/24 192.88.99.0/24 192.168.0.0/16 198.51.100.0/24 203.0.113.0/24 224.0.0.0/4 240.0.0.0/4 255.255.255.255/32"
BYPASS_IPv6_LIST="::/128 ::1/128 ::ffff:0:0/96 100::/64 64:ff9b::/96 2001::/32 2001:10::/28 2001:20::/28 2001:db8::/32 2002::/16 fe80::/10 ff00::/8 2409:8000::/20 2408:8000::/20 240e::/18"

# 强制代理的 IP 列表 (留空则不启用)
PROXY_IPv4_LIST=""
PROXY_IPv6_LIST=""

# ===================== 标记值 =====================
MARK_VALUE=20
MARK_VALUE6=25

# ===================== 路由表 ID =====================
TABLE_ID=2025

# ===================== 分应用代理 =====================
# 启用分应用代理 (0: 禁用, 1: 启用)
APP_PROXY_ENABLE=1
# 代理应用列表 (空格分隔，支持 user:package 格式)
PROXY_APPS_LIST=""
# 绕过应用列表 (空格分隔)
BYPASS_APPS_LIST=""
# 分应用模式 ("blacklist" 或 "whitelist")
APP_PROXY_MODE="blacklist"

# ===================== 中国 IP 绕过 =====================
BYPASS_CN_IP=0
# CN IP 列表文件路径 (相对于脚本目录)
CN_IP_FILE="cn.zone"
CN_IPV6_FILE="cn_ipv6.zone"
# CN IP 源 URL
CN_IP_URL="https://raw.githubusercontent.com/Hackl0us/GeoIP2-CN/release/CN-ip-cidr.txt"
CN_IPV6_URL="https://ispip.clang.cn/all_cn_ipv6.txt"

# ===================== MAC 地址过滤 (热点模式) =====================
MAC_FILTER_ENABLE=0
PROXY_MACS_LIST=""
BYPASS_MACS_LIST=""
MAC_PROXY_MODE="blacklist"

# ===================== QUIC 阻断 =====================
# 阻断 QUIC (UDP 443) (0: 禁用, 1: 启用)
BLOCK_QUIC=0

# ===================== 调试模式 =====================
DRY_RUN=0
