/**
 * MDUI 组件 Monet 颜色覆盖
 * 
 * 直接覆盖 MDUI 组件的背景色以支持 Monet 动态取色
 */

/* ==================== 卡片背景 ==================== */

mdui-card {
  background-color: var(--monet-surface-container-low, var(--mdui-color-surface-container-low)) !important;
}

mdui-card[variant="elevated"] {
  background-color: var(--monet-surface-container-low, var(--mdui-color-surface-container-low)) !important;
}

mdui-card[variant="filled"] {
  background-color: var(--monet-surface-container-high, var(--mdui-color-surface-container-highest)) !important;
}

mdui-card[variant="outlined"] {
  background-color: var(--monet-surface, var(--mdui-color-surface)) !important;
  border-color: var(--monet-outline-variant, var(--mdui-color-outline-variant)) !important;
}

/* ==================== 顶部应用栏 ==================== */

mdui-top-app-bar {
  background-color: var(--monet-surface, var(--mdui-color-surface)) !important;
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
}

/* ==================== 底部导航栏 ==================== */

mdui-navigation-bar {
  background-color: var(--monet-surface-container, var(--mdui-color-surface-container)) !important;
}

/* 导航栏项目 - 激活状态使用 Monet primary */
mdui-navigation-bar-item[active]::part(indicator) {
  background-color: var(--monet-secondary-container, var(--mdui-color-secondary-container)) !important;
}

mdui-navigation-bar-item[active]::part(icon),
mdui-navigation-bar-item[active]::part(label) {
  color: var(--monet-on-secondary-container, var(--mdui-color-on-secondary-container)) !important;
}

/* ==================== 按钮 ==================== */

mdui-button {
  --mdui-comp-filled-button-container-color: var(--monet-primary);
}

mdui-button[variant="filled"] {
  background-color: var(--monet-primary, var(--mdui-color-primary)) !important;
  color: var(--monet-on-primary, var(--mdui-color-on-primary)) !important;
}

mdui-button[variant="tonal"] {
  background-color: var(--monet-secondary-container, var(--mdui-color-secondary-container)) !important;
  color: var(--monet-on-secondary-container, var(--mdui-color-on-secondary-container)) !important;
}

mdui-button[variant="outlined"] {
  border-color: var(--monet-outline, var(--mdui-color-outline)) !important;
  color: var(--monet-primary, var(--mdui-color-primary)) !important;
}

mdui-button[variant="text"] {
  color: var(--monet-primary, var(--mdui-color-primary)) !important;
}

/* ==================== 图标按钮 ==================== */

mdui-button-icon {
  color: var(--monet-on-surface-variant, var(--mdui-color-on-surface-variant)) !important;
}

/* 配置文件项中的更多按钮 - 扩大触发范围 */
mdui-list-item.config-item mdui-dropdown[slot="end-icon"] mdui-button-icon {
  position: relative;
  padding: 12px;
  margin: -12px;
  min-width: 48px;
  min-height: 48px;
}

/* ==================== 浮动操作按钮 FAB ==================== */

mdui-fab {
  background-color: var(--monet-primary-container, var(--mdui-color-primary-container)) !important;
  color: var(--monet-on-primary-container, var(--mdui-color-on-primary-container)) !important;
}

/* ==================== 芯片 Chip ==================== */

mdui-chip {
  background-color: var(--monet-surface-container-high, var(--mdui-color-surface-container-high)) !important;
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
}

/* ==================== 分段按钮组 Segmented Button ==================== */

mdui-segmented-button-group {
  --mdui-comp-segmented-button-container-color: var(--monet-surface-container-high);
  --mdui-comp-segmented-button-outline-color: var(--monet-outline);
  background-color: transparent !important;
  border-color: var(--monet-outline, var(--mdui-color-outline)) !important;
}

mdui-segmented-button {
  --mdui-comp-segmented-button-label-text-color: var(--monet-on-surface);
  --mdui-comp-segmented-button-selected-container-color: var(--monet-secondary-container);
  --mdui-comp-segmented-button-selected-label-text-color: var(--monet-on-secondary-container);
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
  border-color: var(--monet-outline, var(--mdui-color-outline)) !important;
}

/* 分段按钮 - 选中状态 */
mdui-segmented-button[selected] {
  background-color: var(--monet-secondary-container, var(--mdui-color-secondary-container)) !important;
  color: var(--monet-on-secondary-container, var(--mdui-color-on-secondary-container)) !important;
}

/* 分段按钮 - 未选中状态悬停 */
mdui-segmented-button:not([selected]):hover {
  background-color: var(--monet-surface-container-highest, var(--mdui-color-surface-container-highest)) !important;
}

/* 分段按钮 - 选中状态的图标颜色 */
mdui-segmented-button[selected]::part(icon) {
  color: var(--monet-on-secondary-container, var(--mdui-color-on-secondary-container)) !important;
}

/* ==================== 对话框 ==================== */

/* 对话框 - 面板背景 */
mdui-dialog::part(panel) {
  background-color: var(--monet-surface-container-high, var(--mdui-color-surface-container-high)) !important;
}

/* 对话框 - 遮罩层保持半透明效果 */
mdui-dialog::part(overlay) {
  background-color: rgba(0, 0, 0, 0.32) !important;
}

/* 确认对话框 - 限制宽度 */
mdui-dialog#confirm-dialog::part(panel) {
  max-width: 400px !important;
  width: 90% !important;
}

/* ==================== 列表 ==================== */

mdui-list {
  background-color: transparent !important;
}

mdui-list-item {
  background-color: transparent !important;
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
}

mdui-list-item:hover {
  background-color: var(--monet-surface-container-high, var(--mdui-color-surface-container-high)) !important;
}

/* 列表项标题和描述文字颜色 */
mdui-list-item::part(headline) {
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
}

mdui-list-item::part(description) {
  color: var(--monet-on-surface-variant, var(--mdui-color-on-surface-variant)) !important;
  white-space: normal !important;
  overflow-wrap: break-word !important;
  word-break: break-all !important;
  line-height: 1.4 !important;
}

/* 列表项内容区域 - 确保充分利用可用宽度 */
mdui-list-item::part(body) {
  min-width: 0 !important;
  overflow: visible !important;
  flex: 1 1 auto !important;
}

/* 列表项末尾图标区域 - 减少占用空间 */
mdui-list-item::part(end-icon) {
  flex-shrink: 0 !important;
  margin-left: 8px !important;
}

/* UID 列表项 - 优化布局 */
#uid-list mdui-list-item {
  --mdui-list-item-container-padding-right: 8px;
}

#uid-list mdui-list-item mdui-button-icon[slot="end-icon"] {
  margin-left: 4px !important;
  margin-right: -8px !important;
}

mdui-list-item[clickable] {
  cursor: pointer;
}

mdui-list-item[clickable]:hover {
  background-color: var(--monet-surface-variant, var(--mdui-color-surface-variant));
}

/* 修复：当下拉菜单打开时，列表项不应显示选中状态 */
mdui-list-item:focus,
mdui-list-item:focus-visible,
mdui-list-item:focus-within {
  background-color: transparent !important;
  outline: none !important;
}

/* 当列表项包含打开的下拉菜单时，不显示选中背景和 ripple */
mdui-list-item:has(mdui-dropdown[open]) {
  background-color: transparent !important;
}

/* 覆盖 MDUI 内部的 selected/focused 状态 */
mdui-list-item::part(container):focus,
mdui-list-item::part(container):focus-visible {
  background-color: transparent !important;
}

/* 配置项列表：禁用包含下拉菜单的列表项的 ripple 和 state-layer */
mdui-list-item.config-item::part(state-layer) {
  display: none !important;
}

mdui-list-item.config-item::part(ripple) {
  display: none !important;
}

/* ==================== 折叠面板 ==================== */

/* 折叠面板 - 保持圆角 */
mdui-collapse {
  background-color: var(--monet-surface-container-low, var(--mdui-color-surface-container-low)) !important;
  border-radius: 12px;
  overflow: hidden; /* 确保子元素不超出圆角边界 */
}

mdui-collapse-item {
  background-color: transparent !important;
}

/* 折叠面板展开状态保持圆角 */
mdui-collapse-item[open] {
  border-radius: 12px;
}

/* 折叠面板头部圆角 */
mdui-collapse-item::part(header) {
  border-radius: 12px;
}

mdui-collapse-item[open]::part(header) {
  border-radius: 12px 12px 0 0;
}

/* 折叠面板内容区域圆角 */
mdui-collapse-item::part(body) {
  border-radius: 0 0 12px 12px;
}

/* ==================== 文本输入框 ==================== */

mdui-text-field {
  --mdui-comp-text-field-filled-container-color: var(--monet-surface-container-highest, var(--mdui-color-surface-container-highest));
}

mdui-text-field::part(container) {
  background-color: var(--monet-surface-container-highest, var(--mdui-color-surface-container-highest)) !important;
}

mdui-text-field::part(input) {
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
}

mdui-text-field::part(label) {
  color: var(--monet-on-surface-variant, var(--mdui-color-on-surface-variant)) !important;
}

mdui-text-field[focused]::part(label) {
  color: var(--monet-primary, var(--mdui-color-primary)) !important;
}

mdui-text-field::part(supporting) {
  color: var(--monet-on-surface-variant, var(--mdui-color-on-surface-variant)) !important;
}

/* ==================== 下拉菜单 ==================== */

mdui-dropdown {
  background-color: transparent !important;
}

mdui-menu {
  background-color: var(--monet-surface-container, var(--mdui-color-surface-container)) !important;
}

mdui-menu-item {
  color: var(--monet-on-surface, var(--mdui-color-on-surface)) !important;
}

/* 修复全局 CSS 重置导致的菜单项文字截断问题 */
mdui-menu-item::part(container) {
  padding: 8px 12px !important;
}

mdui-menu-item::part(label) {
  overflow: visible !important;
  line-height: normal !important;
}

mdui-menu-item:hover {
  background-color: var(--monet-surface-container-high, var(--mdui-color-surface-container-high)) !important;
}

/* ==================== 进度指示器 ==================== */

mdui-circular-progress {
  /* 覆盖 MDUI circular-progress 的指示器颜色为 Monet 主色 */
  --mdui-color-primary: var(--monet-primary, var(--mdui-color-primary));
}

/* 使用 ::part 选择器确保颜色正确应用到 Shadow DOM 内部 */
mdui-circular-progress::part(indicator) {
  stroke: var(--monet-primary, var(--mdui-color-primary)) !important;
}

mdui-linear-progress {
  /* 线性进度条也使用 Monet 主色 */
  --mdui-color-primary: var(--monet-primary, var(--mdui-color-primary));
}

mdui-linear-progress::part(indicator) {
  background-color: var(--monet-primary, var(--mdui-color-primary)) !important;
}

/* ==================== 图标颜色 ==================== */

mdui-icon {
  color: var(--monet-on-surface-variant, var(--mdui-color-on-surface-variant));
}

/* ==================== 状态芯片 ==================== */

#status-chip {
  text-transform: uppercase;
  font-weight: 500;
}

#status-chip[data-status="running"] {
  background-color: rgb(76, 175, 80) !important;
  color: white !important;
}

#status-chip[data-status="stopped"] {
  background-color: rgb(244, 67, 54) !important;
  color: white !important;
}

#status-chip-new {
  font-size: 12px;
  height: 26px;
}

#status-chip-compact {
  font-size: 12px;
  height: 24px;
}